# ğŸš‚ Railway ë°°í¬ ë””ë²„ê¹… ê°€ì´ë“œ

## âœ… í˜„ì¬ ìƒíƒœ í™•ì¸

### ì„œë²„ ìƒíƒœ
- âœ… **HTTP ì„œë²„**: ì •ìƒ ì‘ë™ (200 OK)
- âœ… **Socket.io ì„œë²„**: ì •ìƒ ì‘ë™ (ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ)
- âœ… **í˜ì´ì§€ ë¡œë“œ**: ì •ìƒ

### âš ï¸ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥ì„±
í´ë¼ì´ì–¸íŠ¸ê°€ Socket.io ì—°ê²°ì— ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°, ëŒ€ë¶€ë¶„ **í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ëˆ„ë½** ë•Œë¬¸ì…ë‹ˆë‹¤.

---

## ğŸ”§ Railway í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### 1ë‹¨ê³„: Railway ëŒ€ì‹œë³´ë“œ ì ‘ì†
1. https://railway.app ë¡œê·¸ì¸
2. `claude-baduk` í”„ë¡œì íŠ¸ ì„ íƒ

### 2ë‹¨ê³„: Variables íƒ­ì—ì„œ í™˜ê²½ ë³€ìˆ˜ í™•ì¸

ë‹¤ìŒ **3ê°œì˜ í™˜ê²½ ë³€ìˆ˜**ê°€ **ë°˜ë“œì‹œ** ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

```env
NODE_ENV=production
PORT=3000
NEXT_PUBLIC_SOCKET_URL=https://web-production-fe2e0.up.railway.app
```

âš ï¸ **ì¤‘ìš”**: `NEXT_PUBLIC_SOCKET_URL`ì€ **Railwayê°€ ìƒì„±í•œ ì‹¤ì œ ë„ë©”ì¸**ê³¼ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤!

### 3ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ë‹¤ë©´ ì¶”ê°€

Railway ëŒ€ì‹œë³´ë“œì—ì„œ:
1. **Variables** íƒ­ í´ë¦­
2. **New Variable** í´ë¦­
3. ìœ„ì˜ 3ê°œ ë³€ìˆ˜ ê°ê° ì¶”ê°€
4. **Deploy** (ìë™ìœ¼ë¡œ ì¬ë°°í¬ë¨)

### 4ë‹¨ê³„: ì¬ë°°í¬ ëŒ€ê¸°
- ì•½ 2-3ë¶„ ì†Œìš”
- Deployments íƒ­ì—ì„œ ì§„í–‰ìƒí™© í™•ì¸

---

## ğŸ§ª ë°°í¬ í›„ í…ŒìŠ¤íŠ¸ ë°©ë²•

### ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ë¡œ í™•ì¸

1. **ì‚¬ì´íŠ¸ ì ‘ì†**: https://web-production-fe2e0.up.railway.app
2. **F12 ëˆŒëŸ¬ì„œ** ê°œë°œì ë„êµ¬ ì—´ê¸°
3. **Console íƒ­** í™•ì¸

#### âœ… ì •ìƒ ì—°ê²° ì‹œ:
```
Socket connected
```

#### âŒ ì—°ê²° ì‹¤íŒ¨ ì‹œ:
```
WebSocket connection to 'ws://localhost:3000/socket.io/' failed
Error: connect_error
```

### Network íƒ­ì—ì„œ í™•ì¸

1. **F12** â†’ **Network** íƒ­
2. **WS** í•„í„° ì„ íƒ (WebSocket)
3. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨

#### âœ… ì •ìƒ:
- `socket.io` ì—°ê²°ì´ **101 Switching Protocols**ë¡œ í‘œì‹œ

#### âŒ ì‹¤íŒ¨:
- ì—°ê²° ì‹œë„ê°€ ë³´ì´ì§€ ì•Šê±°ë‚˜ ì‹¤íŒ¨

---

## ğŸ® ì‹¤ì œ ê²Œì„ í…ŒìŠ¤íŠ¸

### 1. ë°© ìƒì„± í…ŒìŠ¤íŠ¸
1. "Create New Game" ë²„íŠ¼ í´ë¦­
2. 6ìë¦¬ ë°© ì½”ë“œê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
3. ì½˜ì†”ì— ì—ëŸ¬ê°€ ì—†ëŠ”ì§€ í™•ì¸

### 2. ë°© ì°¸ê°€ í…ŒìŠ¤íŠ¸
1. **ì‹œí¬ë¦¿ ëª¨ë“œ**ë¡œ ìƒˆ ì°½ ì—´ê¸°
2. ê°™ì€ URL ì ‘ì†
3. ë°© ì½”ë“œ ì…ë ¥ í›„ "Join Game"
4. ë‘ í”Œë ˆì´ì–´ê°€ ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸

### 3. ê²Œì„ í”Œë ˆì´ í…ŒìŠ¤íŠ¸
1. í‘ëŒ(Black)ì´ ë¨¼ì € ë°”ë‘‘íŒì— ëŒ ë†“ê¸°
2. ë°±ëŒ(White)ì´ ì°¨ë¡€ëŒ€ë¡œ ëŒ ë†“ê¸°
3. ì‹¤ì‹œê°„ìœ¼ë¡œ ì–‘ìª½ í™”ë©´ì— ë°˜ì˜ë˜ëŠ”ì§€ í™•ì¸

---

## ğŸ› ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "Connecting to server..." ë¬´í•œ ë¡œë”©

**ì›ì¸**: `NEXT_PUBLIC_SOCKET_URL` í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½ ë˜ëŠ” ì˜ëª»ëœ URL

**í•´ê²°**:
```bash
# Railway Variablesì— ì¶”ê°€
NEXT_PUBLIC_SOCKET_URL=https://web-production-fe2e0.up.railway.app
```

### ë¬¸ì œ 2: "Mixed Content" ê²½ê³  (HTTPS/HTTP í˜¼ìš©)

**ì›ì¸**: HTTP URLì„ HTTPS ì‚¬ì´íŠ¸ì—ì„œ ì‚¬ìš©

**í•´ê²°**:
- `NEXT_PUBLIC_SOCKET_URL`ì— **https://** ì‚¬ìš© (http ì•„ë‹˜)

### ë¬¸ì œ 3: ë¹Œë“œëŠ” ì„±ê³µí–ˆì§€ë§Œ ì„œë²„ê°€ ì‹œì‘ ì•ˆ ë¨

**ì›ì¸**: Railwayê°€ ì˜ëª»ëœ start ëª…ë ¹ì–´ ì‚¬ìš©

**í•´ê²°**:
1. Railway Settings â†’ Deploy ì„¹ì…˜
2. **Start Command** í™•ì¸:
   ```
   npm run start
   ```

### ë¬¸ì œ 4: í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€í–ˆëŠ”ë°ë„ ì—¬ì „íˆ localhost ì—°ê²°

**ì›ì¸**: ë¹Œë“œ ì‹œì ì— í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ì–´ì„œ `localhost`ë¡œ í•˜ë“œì½”ë”©ë¨

**í•´ê²°**:
1. Variables íƒ­ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì¬í™•ì¸
2. **Redeploy** ë²„íŠ¼ í´ë¦­ (ê°•ì œ ì¬ë¹Œë“œ)

---

## ğŸ“Š Railway ë¡œê·¸ í™•ì¸

### ë°°í¬ ë¡œê·¸ ë³´ê¸°
1. Railway ëŒ€ì‹œë³´ë“œ
2. **Deployments** íƒ­
3. ìµœì‹  ë°°í¬ í´ë¦­
4. **View Logs** í´ë¦­

### ì •ìƒ ë¡œê·¸ ì˜ˆì‹œ:
```
> baduk-game@1.0.0 start
> NODE_ENV=production ts-node --project tsconfig.server.json server.ts

[2026-02-09 09:30:00] Server ready on http://0.0.0.0:3000
```

### ì—ëŸ¬ ë¡œê·¸ ì˜ˆì‹œ:
```
Error: Cannot find module 'socket.io'
```
â†’ ì˜ì¡´ì„± ì„¤ì¹˜ ë¬¸ì œ. `npm install` ì¬ì‹¤í–‰ í•„ìš”.

---

## ğŸ” ê³ ê¸‰ ë””ë²„ê¹…

### Socket.io ì—°ê²° ì§ì ‘ í…ŒìŠ¤íŠ¸ (í„°ë¯¸ë„)

```bash
# Socket.io ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
curl "https://web-production-fe2e0.up.railway.app/socket.io/?EIO=4&transport=polling"

# ì •ìƒ ì‘ë‹µ:
# 0{"sid":"...","upgrades":["websocket"],...}
```

### ì„œë²„ ì¬ì‹œì‘
Railway ëŒ€ì‹œë³´ë“œì—ì„œ:
1. **Settings** â†’ **Restart Service**

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ê°€ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ í™•ì¸:

- [ ] Railwayì— í™˜ê²½ ë³€ìˆ˜ 3ê°œ ì„¤ì •ë¨
  - [ ] `NODE_ENV=production`
  - [ ] `PORT=3000`
  - [ ] `NEXT_PUBLIC_SOCKET_URL=https://web-production-fe2e0.up.railway.app`
- [ ] ì¬ë°°í¬ ì™„ë£Œ (Variables ë³€ê²½ í›„ ìë™ ë°°í¬)
- [ ] ë¸Œë¼ìš°ì € ì½˜ì†”ì— ì—ëŸ¬ ì—†ìŒ
- [ ] "Create New Game" ì‘ë™
- [ ] ë°© ì½”ë“œë¡œ ì°¸ê°€ ê°€ëŠ¥
- [ ] ì‹¤ì‹œê°„ ê²Œì„ í”Œë ˆì´ ì‘ë™

---

## ğŸ†˜ ì—¬ì „íˆ ì•ˆ ë˜ë©´?

### ì™„ì „ ì´ˆê¸°í™” í›„ ì¬ë°°í¬

```bash
# ë¡œì»¬ì—ì„œ
git add .
git commit -m "fix: update production URL"
git push origin main
```

RailwayëŠ” ìë™ìœ¼ë¡œ ì¬ë°°í¬í•©ë‹ˆë‹¤.

---

## ğŸ“ ì¶”ê°€ ë„ì›€

Railway ê³µì‹ ë¬¸ì„œ:
- https://docs.railway.app/

Socket.io ë¬¸ì„œ:
- https://socket.io/docs/v4/

---

**í˜„ì¬ ì„œë²„ URL**: https://web-production-fe2e0.up.railway.app

ëª¨ë“  ì„¤ì •ì´ ì˜¬ë°”ë¥´ë‹¤ë©´ ì¦‰ì‹œ ì‘ë™í•´ì•¼ í•©ë‹ˆë‹¤! ğŸ‰
